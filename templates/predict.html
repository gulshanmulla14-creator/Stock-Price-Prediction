<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Predict Stock | Stock Predictor</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <style>
    /* Light Background Only */
    body { background-color: #f4f6f8; color: #222; font-family: inherit; }

    /* Container Layout */
    .container { display: flex; flex-direction: row; min-height: 100vh; }

    /* Sidebar */
    .sidebar {
      width: 240px;
      background: #5c3b55;
      padding: 20px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      color: #f5f5f5;
    }
    .sidebar a {
      text-decoration: none;
      color: #e0e0e0;
      display: block;
      margin: 12px 0;
      padding: 10px 15px;
      border-radius: 8px;
      transition: 0.3s;
    }
    .sidebar a:hover { background: #6c63ff; color: #fff; }

    /* Main Content */
    .main-content {
      flex-grow: 1;
      padding: 40px;
      background-color: #ffffff;
      border-radius: 15px;
      margin: 20px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.08);
    }

    h1 { text-align: center; margin-bottom: 30px; }

    /* Form */
    form { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-bottom: 30px; }
    form input[type="text"] {
      flex: 1 1 250px;
      padding: 12px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 1rem;
    }
    form button {
      padding: 12px 20px;
      background: #6c63ff;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      min-width: 120px;
    }
    form button:hover { background: #5a52d4; }

    /* Flash Messages */
    .flash { padding: 12px; border-radius: 8px; margin-bottom: 15px; font-weight: 600; text-align: center; }
    .flash.success { background-color: #d4edda; color: #155724; }
    .flash.danger { background-color: #f8d7da; color: #721c24; }
    .flash.info { background-color: #d1ecf1; color: #0c5460; }

    /* Result Box */
    .result {
      margin-top: 20px;
      padding: 25px;
      border-radius: 12px;
      background: #fefefe;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      text-align: center;
    }

    /* Clear & Visible Font for Prices */
    .result p {
      font-family: inherit;  /* Project font */
      font-size: 1.5rem;     /* Clearly visible */
      font-weight: 700;      /* Bold for emphasis */
      color: #222;           /* Dark text on light background */
      margin: 12px 0;
    }
    .result strong { font-weight: 700; }

    /* Chart */
    .chart { margin-top: 25px; display: flex; justify-content: center; }
    .chart img { width: 100%; max-width: 700px; border-radius: 10px; }

    /* Responsive */
    @media screen and (max-width: 900px) {
      .container { flex-direction: column; }
      .sidebar { width: 100%; flex-direction: row; overflow-x: auto; padding: 10px; }
      .sidebar div, .sidebar a { margin: 5px; }
      .main-content { margin: 10px; padding: 20px; }
      .result p { font-size: 1.3rem; }
      form { flex-direction: column; align-items: stretch; }
      form input[type="text"], form button { width: 100%; }
      .chart img { max-width: 100%; }
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="sidebar">
      <div>
        <h2>Stock Predictor</h2>
        <a href="{{ url_for('home') }}">üè† Home</a>
        <a href="{{ url_for('predict') }}">üìà Predict Stock</a>
        <a href="{{ url_for('portfolio') }}">üíº Portfolio</a>
        <a href="{{ url_for('settings') }}">‚öôÔ∏è Settings</a>
      </div>
      <a href="{{ url_for('logout') }}">üö™ Logout</a>
    </div>

    <div class="main-content">
      <h1>üìä Predict Stock</h1>

      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for category, msg in messages %}
            <div class="flash {{ category }}">{{ msg }}</div>
          {% endfor %}
        {% endif %}
      {% endwith %}

      <form method="POST">
        <input type="text" name="stock_symbol" placeholder="Enter Stock Symbol (e.g. AAPL, TCS.NS)" required>
        <button type="submit">Predict</button>
      </form>

      {% if stock_symbol %}
      <div class="result">
        <h3>Results for: {{ stock_symbol }}</h3>
        <p><strong>Current Price:</strong> {{ current_price }}</p>
        <p><strong>Predicted Price:</strong> {{ predicted_price }}</p>
        <p><strong>Change:</strong> {{ percent_change }}%</p>

        {% if percent_change %}
            {% if percent_change >= 50 %}
                <div class="flash success">
                    üöÄ Huge Gain! Stock is expected to rise more than 50%!
                </div>
            {% elif percent_change <= -50 %}
                <div class="flash danger">
                    ‚ö†Ô∏è Big Drop! Stock may fall more than 50%!
                </div>
            {% else %}
                <div class="flash info">
                    ‚ÑπÔ∏è Change is less than 50%
                </div>
            {% endif %}
        {% endif %}

        {% if plot_image %}
        <div class="chart">
          <img src="data:image/png;base64,{{ plot_image }}" alt="Stock Prediction Chart">
        </div>
        {% endif %}
      </div>
      {% endif %}
    </div>
  </div>
</body>
</html>
